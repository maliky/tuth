
* <2025-11-10 Mon 04:35>  Updated implementation plan
** Curriculum creation & approval
 - Keep using Django admin/import-export for deans to create curricula + prerequisites (already works).
 - Wire the existing ApprovalQueue to the admin save hook so any curriculum marked “pending” automatically creates a queue item for VPAA review, and add a simple admin action (“Approve via VPAA”) that flips status + closes the queue entry. No new UI needed beyond admin extensions.
# > For this I am cautious about adding queue item for VPAA.  I think it introduce complexity.  It would be better to simply use exiting state tracking classes and expose that field as editable to the VPAA when he list the curriculum.  I think there's already a bool actualy doing that job of flagging the curriculum as validated or pending. Why didn't you like that simple option ?

** Enrollment officer workflow
- Continue letting enrollment staff create student profiles directly in admin.To support document uploads, expose the registry.DocumentStudent inline and add an admin filter showing “missing required docs” so officers can confirm completeness before flipping a student to “eligible.” (No separate front-end yet.)
# > That's ok you can make the change for that

** Student pre-registration (what’s still missing)
- Data: need at least one active semester with sections, plus RegistrationStatus entries (pending, cleared, etc.)—once seeded, the current views can render.
# > Sections are there. What is missing are registrationstatus entries. Can you mock them up ?
- Functionality: implement POST handlers on /courses/ to:
# > are you sure this should be on courses and not on reservation ?  
  - enforce seat counts (Section.current_registrations updates)
  - attach a Registration.status = pending
# > Do not mixe Course and CurriculumCourse, Sections and SecSession.  seat counts is linked to Section not Course
# > What we will need to add in the future is the possibility for a Dean a associated facutlies with courses they can potentialy teach.
    
  - block courses where prerequisites or schedule conflicts fail (validation logic largely exists but must be applied server-side).
# > The scheduling checks should not be done now. For creating the schedule I will use an external application  such ad FET. But it is true that my app should check on input for time, room, faculty, or student conflicts although this should have been done in creating the schedule for the different sessions.
# > What can happen since we give the choice to student of different SecSession is that they selected conflicting session. This should be flagged at reservation level.

  - Add a “Reservations” list and cancel action so students can withdraw before finance clears them.
# > This is already implemented in the cards of the student UX. Why do you propose it again ?
  - Hook status changes into StatusHistory so we can audit transitions.
# > Which status changes are you talking about?  We do not need to audit change to the status tables
** Financial clearance
- Build a minimal finance UI (or admin action) that lists Registration rows with status = pending and lets a finance officer trigger “clear” (set status to cleared, maybe attach DocumentPayment for proof).
# > you can impmelent this. The attachement of a payment proof is important but not mandatory.  We can trust the finance officer that he file the proof outside of the system.  
- Tie receipts/payments to Invoice and expose a button “Mark cleared” that simply changes the registration status; this is low-cost because the backend already has models.
# > This should be very similare to an admin table listing invoices with and editable boolean field 'payment cleared'. 
** Registrar validation
- Per your note, defer new registrar features for now. Once the earlier steps
are stable, we can revisit the registrar dashboard to add actions that convert
cleared registrations into official roster entries.
# > yes. confirmed. defer for now.


* DONE <2025-11-11 Tue 17:09> View routing map
  CLOSED: [2025-11-11 mar. 21:25]
Split `app/website/views.py` into modular chunks and documented how different user roles traverse the portal.
#+BEGIN_SRC plantuml :results file link :file Docs/view_routing_map.png
@startuml
skinparam actorStyle awesome
left to right direction

actor Visitor
actor Student
actor "Staff User" as Staff
actor "Enrollment Officer" as Enroll
actor Registrar

rectangle "Public Entry" {
  [Landing\n(/)] as Landing
}

rectangle "Portal Access" {
  [Login\n(/auth/login/)] as Login
  [Router\n(/portal/)] as Router
  [Logout\n(/auth/logout/)] as Logout
}

rectangle "Student Views" {
  [Student Dashboard\n(/student/dashboard/)] as StuDash
  [Course Dashboard\n(/courses/)] as Courses
}

rectangle "Staff Views" {
  [Staff Hub\n(/staff/dashboard/)] as StaffHub
  [Role Dashboard\n(/staff/<role>/)] as StaffRole
}

rectangle "Registrar Tools" {
  [Course Windows\n(/registrar/course-windows/)] as RegWin
}

rectangle "Enrollment Tools" {
  [Student List\n(/students/)] as StuList
  [Student Detail\n(/students/<pk>)] as StuDetail
  [Create Student\n(/students/new/)] as StuNew
  [Delete Student\n(/students/<pk>/delete/)] as StuDelete
}

rectangle "Admin" {
  [Django Admin\n(/admin/)] as AdminPage
}

Visitor --> Landing
Landing --> Login
Student --> Login
Staff --> Login
Enroll --> Login
Registrar --> Login

Login --> Router
Router --> StuDash : student profile
Router --> StaffHub : staff profile
Router --> AdminPage : admin or support
StuDash --> Courses
StaffHub --> StaffRole
StaffRole --> RegWin : Registrar group
StaffRole --> StuList : Enrollment group
StaffRole --> StuNew
StuList --> StuDetail
StuDetail --> StuDelete

Student --> Logout
Staff --> Logout
Enroll --> Logout
Registrar --> Logout

@enduml
#+END_SRC


* DONE <2025-11-11 Tue 19:59> Role hierarchy sketch
  CLOSED: [2025-11-11 mar. 21:24]
Mapped the intended officer/non-officer structure described in `app/shared/auth/perms.py`. Officers inherit access to their non-officer workspaces, while Staff remains the base profile every employee can fall back to.

#+BEGIN_SRC plantuml :results file link :file Docs/role_hierarchy.png
@startuml
skinparam linetype ortho
skinparam nodesep 40
skinparam ranksep 30

[VPAA] --> [Dean]
[Dean] --> [Chair]
[Chair] --> [Faculty]

[VPAA] --> [Registrar Officer]
[Registrar Officer] --> [Registrar]

[VPAA] --> [Enrollment Officer]
[Enrollment Officer] --> [Enrollment Staff]

[VPAA] --> [Finance Officer]
[Finance Officer] --> [Finance]
[Finance] --> [Cashier]
[Finance Officer] --> [Scholarship Officer]

[VPAA] --> [IT Support]

[Staff (base)] --> [Faculty]
[Staff (base)] --> [Enrollment Staff]
[Staff (base)] --> [Finance]
[Staff (base)] --> [Registrar]
[Staff (base)] --> [General Workspace]

@enduml
#+END_SRC

#+RESULTS:
[[file:Docs/role_hierarchy.png]]

* DONE The scenario narrative is solid, but “ready to run” depends on whether each step already has backing data, permissions, and UI hooks in the codebase:
  CLOSED: [2025-11-10 Mon 05:19]

  - Dean → VPAA workflow: 
# > But for me the Dean can create a curriculum using the admin interface and event import a curriculum and prerequisits using the import-export extention.

  - Enrollment officer & student onboarding: 
# >  the way I see that above is the enrollement staff creating the student profil using the admin interface directly.

  - Student pre-registration:
# > Ok so except data, what is missing here concretely to make it work ?
    
  - Financial clearance: 
# > Well we can do that right ? it does not cost much doesn't it ?

  - Registrar validation: 
# > lets hold on this one for now.


* DONE UX Surface Map (2025-11-09)
  CLOSED: [2025-11-11 mar. 21:24]

#+BEGIN_SRC plantuml :results file link :file Docs/ux_surface_map.png
@startuml
skinparam actorStyle awesome
left to right direction

actor Applicant
actor Student
actor Instructor
actor Chair
actor Dean
actor VPAA
actor Registrar
actor "Financial Officer" as Finance
actor "Scholarship Officer" as Scholarship
actor "Enrollment Officer" as EnrollOfficer

rectangle "Applicant Portal" {
  [Landing Page\n(/)] as Landing
  [Apply + Upload Docs] as Apply
  [Status Tracker] as Status
  Applicant --> Landing
  Landing --> Apply
  Apply --> Status
}

rectangle "Unified Access" as Portal {
  [Portal Login\n(/auth/login/)]
  [Role Router\n(/portal/)]
}

rectangle "Student Experience" {
  [Student Dashboard\n(/student/dashboard/)] as StuDash
  [Course Registration\n(/courses/)] as Courses
  [Financial Status] as StuFin
  [Schedule & Grades] as StuSched
  [Documents Upload] as StuDocs

  Student --> StuDash
  StuDash --> Courses
  StuDash --> StuFin
  StuDash --> StuSched
  StuDash --> StuDocs
}

rectangle "Faculty / Staff Console\n(/staff/<role>/)" {
  [Instruction Hub\n(Instructor)] as Instr
  [Chair Curriculum Center] as ChairDash
  [Dean Oversight Page] as DeanDash
  [VPAA Approval Hub] as VPaaDash
  [Registrar Lifecycle Ops] as RegDash
  [Finance & Holds] as FinDash
  [Scholarship Office] as SchDash
  [Enrollment Operations] as EnrollDash

  Instructor --> Instr
  Chair --> ChairDash
  ChairDash --> DeanDash
  DeanDash --> VPaaDash
  Dean --> DeanDash
  VPAA --> VPaaDash
  Registrar --> RegDash
  Finance --> FinDash
  Scholarship --> SchDash
  EnrollOfficer --> EnrollDash
}

Portal --> StuDash
Portal --> Instr
Portal --> ChairDash
Portal --> DeanDash
Portal --> VPaaDash
Portal --> RegDash
Portal --> FinDash
Portal --> SchDash

Courses --> RegDash : Registrations/holds
StuDash --> FinDash : Balances & payments
SchDash --> FinDash : Donor letters & compliance
Apply --> EnrollDash : Document review / profile creation
Status --> EnrollDash : Candidate updates
RegDash --> VPaaDash : Overloads / approvals
ChairDash --> DeanDash
DeanDash --> VPaaDash

@enduml
#+END_SRC

#+RESULTS:
[[file:../Plantuml/ux_surface_map.png]]

  /model      choose what model and reasoning effort to use
  /approvals  choose what Codex can do without approval
  /review     review my current changes and find issues
  /new        start a new chat during a conversation
  /init       create an AGENTS.md file with instructions for Codex
  /compact    summarize conversation to prevent hitting the context limit
  /undo       ask Codex to undo a turn
  /diff       show git diff (including untracked files)




*** Passwords
 - test_donor (Donor): Created with pwd D-pass-P!
 - test_cashier (Cashier): Created with pwd C-pass-P!
 - test_student (Student): Created with pwd S-pass-P!
 - test_prospecting_student (Prospecting Student): Created with pwd P-pass-P!
 - test_staff (Staff): Created with pwd S-pass-P!
 - test_faculty (Faculty): Created with pwd F-pass-P!
 - test_chair (Chair): Created with pwd C-pass-P!
 - test_dean (Dean): Created with pwd D-pass-P!
 - test_vpaa (Vice President Academic Affairs): Created with pwd V-pass-P!
 - test_enrollment (Enrollment): Created with pwd E-pass-P!
 - test_enrollment_officer (Enrollment Officer): Created with pwd E-pass-P!
 - test_finance (Finance): Created with pwd F-pass-P!
 - test_finance_officer (Finance Officer): Created with pwd F-pass-P!
 - test_registrar (Registrar): Created with pwd R-pass-P!
 - test_registrar_officer (Registrar Officer): Created with pwd R-pass-P!
 - test_it (It): Created with pwd I-pass-P!
 - testest (Student)   - T-pass-T!
  


* codex tips
  
  / for commands                          ctrl + j for newline
  @ for file paths                        ctrl + v to paste images
  esc esc to edit previous message        ctrl + c to exit
                                          ctrl + t to view transcript

