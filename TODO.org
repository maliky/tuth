* Main redirection from same login page 

** Student
   Wha is proposed is acceptable

** Financial Services
Can consult the financial status of any student,
They can clear a student payment
They keep track of atttachement justifying payments
They validate the payement so the student can proceed to registration

** Registration
They print class roster
They open /close grade input timeframe for faculty
They can edit any grades
They print grade sheets
They validated the registration of student to section (before they appear on official class roster or can receive a grade for the section)

** Enrollment
They create students
   
** Faculties

** Admin (VPAA, President)

* The student_dashboard preview is good connect it to the backend.

* We need to add a link for a student to print / display his grade sheet for the current semester.
  
* Login in with a testest student user in django admin
** TODO redirect to the student dashboard directly not to django admin

* About some rights for users
** test_enrollment_officer
Curriculum
Current enrolled semester should be the same with entry semester
test_student
testest -> T-pass-T!  : tusistusis : ?

** student
   a student should not be able to see all Academics
nor the list of all students or registration...  it should not be a staff

in the url courses for a student x, following the curriculum BBA Banking and Finance, we should list only the courses from his curriculum, and eventualy electives preselected by the college or curriculum head.   This electives will be marked as elective courses in the curriculum. Should be listed only courses respecting for which the studen has fullfilled the prerequisites (nb credit hours, completed previous courses...)

students listing should not be accessible a a student.

*** action
When loggin in an identified student should reach his dashboard
new enrolled student
- showing basic info for the student (name, id, academic year, curriculum)
menu entries on the left hand side
**** Course Registeration
- been show a list of course with  status
- should be in the form of a table or well aligned
  course shortname/code ; course title; status (registered, pending, completed, abandoned ) with date of last status change or date ofr completion grade if applicable, credit hours and semester.
- Another menu should bring the form to register a new course
in that form a summary of the student information related to the registrationm
a list of course code previsouly completedm a field shoing the number of credit hours completedm at the bottom o fthe page an image or a link to the curriculum plan
in the middle the form where the student can selecte in a drop down list a course from the curriculum.
it is supposed that this course has already been schedule so the schedule should be displayed also... Another way and better ui would be to displya the list of available courses to the student drwn from the curriculum, each with a checkbox inf front for slection, and a few important detila to help the slection process.  A ligne should have course title, code, credit hoursm scheldule and a check box to be selected. It would be ok also to have the other courses of the curriculum listed but grayed out with a reminder of the prerequisites.  and I am forgetting to also list the fee attached toeach course (only for available courses as courses price will vary from one semester to another)  .

As the student selects courses to regsiterm I want the his credit hours blaance to diminish accordingly and also the finalcnial balance to be updated.

It should be clear that the student is making a reservation for the course and the his place will be garentied once the payment has been received.  That reminds me that in each line their should be a number for the number of seat avaialbel lein total and remaining.  I said course but it is rather in front o each section.

In fact I see the course listed in plain and then for each a drop down list with the sections schedule and the available seats next to it.  The stduent slecte the section is ithis is taken as chekcing the box for a registration. so remove the registration checkbox...

*** Student dashboard UX
- `website/student_portal_base.html` + `student_dashboard.html` power the new layout; styling/JS live in `student_portal.css` and `student_dashboard.js`.
- `/student/dashboard/` (view: `student_dashboard` in `app/website/views.py`) now pulls real student data: registrations, curriculum courses, sections, prereq checks, credit math, invoices/payments, and grades.
- Credit/fee counters update live from actual seat selections; seat counts and section schedules reflect `Section` + `SecSession` records.
- Next: hook the “Save reservation” and “Proceed to payment” buttons to real workflows and enforce role-based access before launch.
   
* About the website
I want to personnalize the django admin/login form
depending on the username I want to redirect to either normal admin, or to student
I also want to change the them of the admin login form, change the title
 
* 2025
 
** 2025-11 novembre

*** 2025-11-08 samedi
**** DONE for the semester registration opening
     CLOSED: [2025-11-08 sam. 00:39]
     :PROPERTIES:
     :age:      [2025-11-08 sam. 00:15]
     :origin:   [[file:/mnt/backup/Jobs/TU/DRID/TII-Technics-Innovations/Tusis/Tusis_app/app/timetable/models/semester.py::"""Semester module."""]]
     :END:

It would be better to add a status in the semester model using existing mixing and leveraging constructed used in other files to manage status, status validation and tracking of historical changes.  Remove the class that you added, implement the strategy I propose and make sure the code is cohernet witht the proposed changes.
**** TODO student dashboard ux
     :PROPERTIES:
     :age:      [2025-11-08 sam. 00:37]
     :origin:   [[file:/mnt/backup/Jobs/TU/DRID/TII-Technics-Innovations/Tusis/Tusis_app/TODO.org::*for the semester registration opening][for the semester registration opening]]
     :END:

in the list of courses order the one available to the student at the top of the list, the other should be under a colapsed title called somehting like locked courses, or not yet available courses.     
**** TODO Add columns to the semester admin table 
     :PROPERTIES:
     :age:      [2025-11-08 sam. 00:42]
     :origin:   [[file:/mnt/backup/Jobs/TU/DRID/TII-Technics-Innovations/Tusis/Tusis_app/app/timetable/admin/registers/core.py::"""timetable.Core module."""]]
     :END:

On column should indicate the number of students enrolled in that semester.
Another should indicate the number of sections in that semester
for both the number should be clickable and take the user 1 to the list of students, 2 to the list of sections for that semesters
**** TODO implementing Reservation
     :PROPERTIES:
     :age:      [2025-11-08 sam. 01:00]
     :origin:
     :END:

The idea is to use the registration status workflow from
Pendingm financialy clearedm registrar cleared.  but detail of the workflow can be found in mwe.org file.

In this task you should implement the action when the student clics on reservation after selecting a few courses.
**** TODO Extending tests with course registration
     :PROPERTIES:
     :age:      [2025-11-08 sam. 01:03]
     :origin:   [[file:/mnt/backup/Jobs/TU/DRID/TII-Technics-Innovations/Tusis/Tusis_app/app/timetable/admin/registers/core.py::url = (]]
     :END:

Extend the mockup test and aat bu generating more profile of student.
you will need to generate an student with a history of 2 or 4 semester behind him to be able to test complex prerequisits.
**** TODO Extending tests of students
     :PROPERTIES:
     :age:      [2025-11-08 sam. 01:05]
     :origin:   [[file:/mnt/backup/Jobs/TU/DRID/TII-Technics-Innovations/Tusis/Tusis_app/app/timetable/admin/registers/core.py::url = (]]
     :END:

*** 2025-11-09 dimanche
**** 
**** DONE improve login page
     CLOSED: [2025-11-09 Sun 13:54]
     :PROPERTIES:
     :age:      [2025-11-09 dim. 13:42]
     :origin:   [[file:/mnt/backup/Prog/Python/Crypto/kolaBiBot/JOURNAL.org::*<2025-11-09 dim.> This is some infromation for codex.][<2025-11-09 dim.> This is some infromation for codex.]]
     :END:
Explain:
1. the left side page in login page
2. Why option for different surface? Student dashboard, Staff workspace, Administrator console if redirection when connected ?
3. how to test a username passord for one of my test student testest I've reset it password but i cannot connect still ? Do I need to restart the server ? strange..

Answers:
2. The quick links are still helpful because the page can be bookmarked or reached when users are already authenticated; if the redirect target cannot be derived (e.g., group misconfiguration) the buttons offer manual navigation. They also help UX reviewers confirm each surface exists during mock testing.
3. Password resets do not require a server restart. To guarantee a known credential for `testest`, run `python manage.py changepassword testest` or use the shell:
   ```python
   from django.contrib.auth import get_user_model
   User = get_user_model()
   u = User.objects.get(username="testest")
   u.set_password("T-pass-T!")
   u.save()
   ```
   Ensure the user is `is_active=True` and not locked by login throttling. If login still fails, check the server logs for auth backends or group-based redirects denying access.


** 2025-11 November

make sure that if a student select courses totalying more than his aloowed creditm they he cannot make the reservations.
Also is the reservation is canceld (he should be able to cancel a reseravation meaning that while prpendingm the studnet should still this the course and have the possibilityh oto cancel the resravation) in taht case the credit and money should be resaured as expected .

Explain:
1. the left side page with a filter in login page

Answer:
- The tinted left panel is just a hero card that frames the unified login as a campus-wide entry point. It holds future announcements, highlights, or help text while visually separating the credential form. There’s no extra logic tied to it—purely presentational to keep the experience branded and welcoming.

- After logout fall back always to `/auth/login/`.
- Remove the student/staff shortcuts from the portal header once automatic redirects cover all personas.

*** Role dashboards & required data (2025-11-09)
- Applicant landing: pulls `app.people.models.Applicant` (bio, contact, status) + `ApplicationDocument`. Needs a `status_history` table to show review milestones.
- Student dashboard: already wired to `Student`, `Registration`, `Section`, `Invoice`, `Payment`, `Grade`. Outstanding data: seat counts per section (expose `Section.capacity` + `Registration.status` filter), doc-upload audit trail.
- Instructor workspace: needs `Section` + `Grade` records scoped to `section.faculty`. Missing: explicit `FacultyProfile` (table?) linking `User` to `Instructor`.
# > For FacultyProfile lookin @people/models/faculty.py
- Chair curriculum console: relies on `Curriculum`, `CurriculumCourse`, `Prerequisite`, `FacultyAssignment`. Missing: workload metrics per faculty and misbehavior reports table.
# > Do not add a misbehavior yet will be handeled manualy
# > for workload metrics do add a table for historical audit reason too.  I mean to check who has been working extra in the past semester for example
- Dean oversight: needs curriculum imports (`import_export` logs), overload proposals (`WorkloadRequest` model TBD), department KPIs (aggregated registrations/payments).
# > ignore deparment KPI for now,  or let just a dean have his information page visible by all his faculties / students

- VPAA approvals hub: consumes overloads, prerequisite changes, and policy updates. Requires `ApprovalQueue` table capturing request type, payload, state transitions.
# > implement this approvalQueue

- Registrar lifecycle ops: data from `Registration`, `Grade`, `TranscriptRequest`, `Semester`, `StatusHistory`. Need `TranscriptRequest` model and registration anomaly flags.
# > implement TranscriptRequest
# > registration anomales should only be flagged on the fly on his dashboard, no table
- Scholarship office: `Donor`, `ScholarshipAward`, `ScholarshipLetter`, `Invoice`. Need GPA snapshots per term plus template metadata for mail merges.
# > make a proposal for this  
- Financial officer: `Invoice`, `Payment`, `FinancialHold`, `ScholarshipAward`. Need `Attachment` model for payment proofs and `HoldAudit`.
# >  the attachment can probably be integrated with the registry/models/document.py class

Dashboards to build after login:
1. Applicant portal (existing public pages).
2. Student dashboard (already prototyped).
3. Instructor, Chair, Dean, VPAA, Registrar, Scholarship Officer, Financial Officer cards -> dedicated `/staff/<role>/` screens.
# > yes do all of the above

Selenium smoke test idea:
- Script logs in (parameterized users), waits for redirect, asserts role-specific hero text/cards, tests logout, repeats for each role.
- Use `pytest-selenium` + fixtures that create fake users/groups + factories for required models.
# > implement the above  

Implementation plan:
1. Finalize data gaps (create missing models: `FacultyProfile`, `ApprovalQueue`, `ScholarshipLetterTemplate`, etc.).
2. Add staff router view that picks template based on highest-priority role.
3. Build templated dashboards incrementally (start with Registrar, Finance, Scholarship, Instructor) using shared card components.
# > agree for the above   
4. Seed sample data fixtures for Selenium tests; wire into CI.
# > We have real data in the DB for pass semester but we are missing a lot of data.  need to mockup upcomming semester data, reconduct curriculum and schedules
5. Implement Selenium suite covering login, redirect, dashboard key elements, and logout for each persona.
# > ok   
